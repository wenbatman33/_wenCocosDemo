{"version":3,"sources":["file:///Users/batman_work/workspace3.0/applearning/_wenDemo/wenDemo/assets/Scripts/AudioManager.ts"],"names":["_decorator","AudioSource","Component","ccclass","property","AudioManager","instance","_instance","onLoad","destroy","onDestroy","stopMusic","musicSource","stop","loop","console","error","stopSound","soundSource","playMusic","music","clip","play","playSound","sound","playOneShot"],"mappings":";;;;;;;;;;;;;;;;AACEA,MAAAA,U,OAAAA,U;AAEAC,MAAAA,W,OAAAA,W;AACAC,MAAAA,S,OAAAA,S;;;;;;;;;OAII;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;8BAGjBK,Y,WADZF,OAAO,CAAC,cAAD,C,UAOLC,QAAQ,CAACH,WAAD,C,UAGRG,QAAQ,CAACH,WAAD,C,sCAVX,MACaI,YADb,SACkCH,SADlC,CAC4C;AAAA;AAAA;;AAK1C;AAL0C;;AAQ1C;AAR0C;AAAA;;AAEhB,mBAARI,QAAQ,GAAiB;AACzC,iBAAOD,YAAY,CAACE,SAApB;AACD;;AAQSC,QAAAA,MAAM,GAAS;AACvB;AACA,cAAI,CAACH,YAAY,CAACE,SAAlB,EAA6B;AAC3BF,YAAAA,YAAY,CAACE,SAAb,GAAyB,IAAzB;AACD,WAFD,MAEO;AACL,iBAAKE,OAAL;AACD;AACF;;AAESC,QAAAA,SAAS,GAAS;AAC1B,cAAIL,YAAY,CAACE,SAAb,KAA2B,IAA/B,EAAqC;AACnCF,YAAAA,YAAY,CAACE,SAAb,GAAyB,IAAzB;AACD;AACF;;AAEDI,QAAAA,SAAS,GAAG;AACV,cAAI,KAAKC,WAAT,EAAsB;AACpB,iBAAKA,WAAL,CAAiBC,IAAjB;AACA,iBAAKD,WAAL,CAAiBE,IAAjB,GAAwB,KAAxB;AACD,WAHD,MAGO;AACLC,YAAAA,OAAO,CAACC,KAAR,CAAc,8CAAd;AACD;AACF;;AAEDC,QAAAA,SAAS,GAAG;AACV,cAAI,KAAKC,WAAT,EAAsB;AACpB,iBAAKA,WAAL,CAAiBL,IAAjB;AACD,WAFD,MAEO;AACLE,YAAAA,OAAO,CAACC,KAAR,CAAc,sCAAd;AACD;AACF;;AAEDG,QAAAA,SAAS,CAACC,KAAD,EAAmBN,IAAa,GAAG,KAAnC,EAA0C;AACjD,cAAIM,KAAJ,EAAW;AACT,iBAAKR,WAAL,CAAiBS,IAAjB,GAAwBD,KAAxB;AACA,iBAAKR,WAAL,CAAiBE,IAAjB,GAAwBA,IAAxB;AACA,iBAAKF,WAAL,CAAiBU,IAAjB;AACD,WAJD,MAIO;AACLP,YAAAA,OAAO,CAACC,KAAR,CAAc,8CAAd;AACD;AACF;;AAEDO,QAAAA,SAAS,CAACC,KAAD,EAAmB;AAC1B;AACA,cAAIA,KAAJ,EAAW;AACT,iBAAKN,WAAL,CAAiBO,WAAjB,CAA6BD,KAA7B;AACD,WAFD,MAEO;AACLT,YAAAA,OAAO,CAACC,KAAR,CAAc,8CAAd;AACD;AACF;;AA7DyC,O,UAC3BT,S,GAA0B,I;;;;;iBAMP,I;;;;;;;iBAGA,I","sourcesContent":["import {\n  _decorator,\n  AudioClip,\n  AudioSource,\n  Component,\n  director,\n  Node\n} from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('AudioManager')\nexport class AudioManager extends Component {\n  private static _instance: AudioManager = null;\n  public static get instance(): AudioManager {\n    return AudioManager._instance;\n  }\n  // 音樂播放器\n  @property(AudioSource)\n  public musicSource: AudioSource = null;\n  // 音效播放器\n  @property(AudioSource)\n  public soundSource: AudioSource = null;\n\n  protected onLoad(): void {\n    // 單例模式\n    if (!AudioManager._instance) {\n      AudioManager._instance = this;\n    } else {\n      this.destroy();\n    }\n  }\n\n  protected onDestroy(): void {\n    if (AudioManager._instance === this) {\n      AudioManager._instance = null;\n    }\n  }\n\n  stopMusic() {\n    if (this.musicSource) {\n      this.musicSource.stop();\n      this.musicSource.loop = false;\n    } else {\n      console.error('AudioManager: Music source or clip not found');\n    }\n  }\n\n  stopSound() {\n    if (this.soundSource) {\n      this.soundSource.stop();\n    } else {\n      console.error('AudioManager: Sound source not found');\n    }\n  }\n\n  playMusic(music: AudioClip, loop: boolean = false) {\n    if (music) {\n      this.musicSource.clip = music;\n      this.musicSource.loop = loop;\n      this.musicSource.play();\n    } else {\n      console.error('AudioManager: Music source or clip not found');\n    }\n  }\n\n  playSound(sound: AudioClip) {\n    // 可由外部的腳本傳入音效\n    if (sound) {\n      this.soundSource.playOneShot(sound);\n    } else {\n      console.error('AudioManager: Sound source or clip not found');\n    }\n  }\n}\n"]}